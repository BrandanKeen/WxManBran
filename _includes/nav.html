<nav class="site-nav" aria-label="Primary">
  <div class="site-nav__inner">
    <a class="site-nav__brand" href="{{ '/' | relative_url }}">{{ site.title }}</a>
    <button class="site-nav__toggle" type="button" aria-expanded="false" aria-controls="site-nav-links">
      <span class="site-nav__toggle-line"></span>
      <span class="site-nav__toggle-line"></span>
      <span class="site-nav__toggle-line"></span>
      <span class="visually-hidden">Menu</span>
    </button>
    <ul id="site-nav-links" class="site-nav__links">
      {% assign current = page.url | default: '/' | relative_url %}
      {% for item in site.data.nav %}
      {% assign item_url = item.url | relative_url %}
      {% assign normalized_current = current | replace: '//', '/' %}
      {% assign normalized_item = item_url | replace: '//', '/' %}
      <li>
        <a href="{{ item_url }}"{% if normalized_current == normalized_item %} aria-current="page"{% endif %}>
          {% case item.title %}
          {% when 'Home' %}
          <span class="site-nav__icon" aria-hidden="true">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" focusable="false">
              <path fill="currentColor" d="M12 3.2 4 9.2V20a1 1 0 0 0 1 1h5v-5h4v5h5a1 1 0 0 0 1-1V9.2l-8-6zm0-2.2 10 7.5V21a3 3 0 0 1-3 3h-5a1 1 0 0 1-1-1v-5h-2v5a1 1 0 0 1-1 1H5a3 3 0 0 1-3-3V8.5L12 1z"/>
            </svg>
          </span>
          {% when 'Tropical Updates' %}
          <span class="site-nav__icon" aria-hidden="true">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" focusable="false">
              <path fill="currentColor" d="M3 12a1 1 0 0 1 1-1h10.59l-2.3-2.29a1 1 0 1 1 1.42-1.42l4.01 4a1 1 0 0 1 0 1.42l-4.01 4a1 1 0 0 1-1.42-1.42L14.59 13H4a1 1 0 0 1-1-1zm18-1a1 1 0 0 0 0-2h-5a1 1 0 0 0 0 2h5zm0 4h-5a1 1 0 0 0 0 2h5a1 1 0 0 0 0-2z"/>
            </svg>
          </span>
          {% when 'Previous Storms' %}
          <span class="site-nav__icon" aria-hidden="true">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" focusable="false">
              <path fill="currentColor" d="M12 2a1 1 0 0 1 .92.61c.5 1.19 1.9 1.8 3.23 2.38 1.25.53 2.55 1.08 3.37 2.17.74.98.85 2.28.36 3.43-.48 1.14-1.46 2.02-2.5 2.92-.47.4-.96.81-1.39 1.25l-.18.18c-.58.58-.94.94-.65 1.55.28.59.94.63 1.66.63h.91a1 1 0 0 1 0 2h-.91c-1.28 0-2.67-.12-3.36-1.56-.7-1.45.01-2.45.78-3.22l.18-.18c.48-.48.99-.91 1.5-1.35.9-.77 1.75-1.49 2.06-2.26.21-.5.17-.93-.1-1.28-.46-.6-1.46-1.02-2.59-1.5-1.5-.64-3.28-1.4-4.11-3.09-.42.81-1.18 1.34-1.97 1.88-.57.4-1.17.82-1.7 1.35-.77.78-1.32 1.83-.9 2.63.33.62 1.11.92 2.08 1.27 1.24.45 2.8 1.01 3.42 2.48.47 1.11.34 2.38-.37 3.45C13.07 20.74 11.86 21 10.77 21a8.6 8.6 0 0 1-4.63-1.4 1 1 0 0 1 1.09-1.67c1.55 1 3.74 1.46 4.71.97.32-.16.6-.5.8-.83.3-.45.36-.93.22-1.26-.25-.59-1.16-.92-2.18-1.28-1.21-.43-2.7-.96-3.47-2.37-.82-1.52-.42-3.39.98-4.82.63-.64 1.33-1.13 1.98-1.58.86-.6 1.6-1.11 1.76-1.88A1 1 0 0 1 12 2z"/>
            </svg>
          </span>
          {% endcase %}
          <span>{{ item.title }}</span>
        </a>
      </li>
      {% endfor %}
    </ul>
  </div>
</nav>
<script>
  (function() {
    document.documentElement.classList.add('js-nav');
    const nav = document.querySelector('.site-nav');
    if (!nav) return;
    const toggle = nav.querySelector('.site-nav__toggle');
    const links = nav.querySelector('#site-nav-links');
    if (!toggle || !links) return;

    toggle.addEventListener('click', function() {
      const expanded = this.getAttribute('aria-expanded') === 'true';
      this.setAttribute('aria-expanded', !expanded);
      links.classList.toggle('is-open', !expanded);
    });

    links.addEventListener('click', function(event) {
      if (event.target.closest('a')) {
        toggle.setAttribute('aria-expanded', 'false');
        links.classList.remove('is-open');
      }
    });
  })();
</script>
