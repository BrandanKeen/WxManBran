{% assign share_url = page.url | absolute_url %}
{% assign share_title = page.title | default: site.title %}
{% assign heading = include.title %}
{% assign subheading = include.subtitle %}
{% assign aria_label = include.aria_label %}

{% if heading == nil or heading == '' %}
  {% if page.collection == 'posts' %}
    {% assign heading = 'Share this update' %}
  {% else %}
    {% assign heading = 'Share This Page' %}
  {% endif %}
{% endif %}

{% if subheading == nil or subheading == '' %}
  {% if page.collection == 'posts' %}
    {% assign subheading = 'Send the latest Tropical Update to friends and family.' %}
  {% elsif page.collection == 'storms' %}
    {% assign subheading = 'Send this storm page to friends and family.' %}
  {% else %}
    {% assign subheading = 'Share this page with friends and family.' %}
  {% endif %}
{% endif %}

{% if aria_label == nil or aria_label == '' %}
  {% assign aria_label = heading %}
{% endif %}

<div class="share-panel" data-share-panel>
  <h2 class="share-panel__title">{{ heading }}</h2>
  {% if subheading %}
  <p class="share-panel__subtitle">{{ subheading }}</p>
  {% endif %}
  <div class="share share-panel__buttons share-grid" role="group" aria-label="{{ aria_label }}">
    <a class="share-button share-action share-button--facebook share-action--facebook"
       href="https://www.facebook.com/sharer/sharer.php?u={{ share_url | uri_escape }}"
       target="_blank"
       rel="noopener"
       title="Share on Facebook">
      <svg class="share-button__icon" aria-hidden="true" focusable="false" viewBox="0 0 24 24">
        <path d="M22.675 0H1.326C.595 0 0 .595 0 1.326v21.348C0 23.405.595 24 1.326 24h11.495v-9.294H9.69v-3.622h3.13V8.413c0-3.1 1.894-4.788 4.659-4.788 1.325 0 2.463.099 2.793.143v3.24l-1.918.001c-1.504 0-1.796.715-1.796 1.763v2.312h3.587l-.467 3.622h-3.12V24h6.116C23.405 24 24 23.405 24 22.674V1.326C24 .595 23.405 0 22.675 0z" />
      </svg>
      <span class="share-button__label">Facebook</span>
    </a>
    <a class="share-button share-action share-button--x share-action--x"
       href="https://twitter.com/intent/tweet?url={{ share_url | uri_escape }}&text={{ share_title | uri_escape }}"
       target="_blank"
       rel="noopener"
       title="Share on X (formerly Twitter)">
      <svg class="share-button__icon" aria-hidden="true" focusable="false" viewBox="0 0 24 24">
        <path d="M18.244 2H22L14.19 11.017 23.018 22H16.63l-5.036-6.437L6.09 22H2.244l8.557-9.88L1.982 2h6.482l4.38 5.84L18.244 2z" />
      </svg>
      <span class="share-button__label">Share on X</span>
    </a>
    <a class="share-button share-action share-button--email share-action--email"
       href="mailto:?subject={{ share_title | uri_escape }}&body={{ share_title | uri_escape }}%0A%0A{{ share_url | uri_escape }}"
       title="Share via email">
      <svg class="share-button__icon" aria-hidden="true" focusable="false" viewBox="0 0 24 24">
        <path d="M2 4c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h20c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2H2zm0 2h20v.01L12 13 2 6.01V6zm0 4.236l8.803 5.865c.37.247.824.247 1.194 0L22 10.236V18H2v-7.764z" />
      </svg>
      <span class="share-button__label">Email</span>
    </a>
    <a class="share-button share-action share-button--sms share-action--sms"
       href="sms:?&body={{ share_title | uri_escape }}%20-%20{{ share_url | uri_escape }}"
       title="Share via text message">
      <svg class="share-button__icon" aria-hidden="true" focusable="false" viewBox="0 0 24 24">
        <path d="M4 3h16a3 3 0 0 1 3 3v9a3 3 0 0 1-3 3h-5.379L9 23v-5H4a3 3 0 0 1-3-3V6a3 3 0 0 1 3-3zm0 2a1 1 0 0 0-1 1v9a1 1 0 0 0 1 1h7v2.382L15.382 16H20a1 1 0 0 0 1-1V6a1 1 0 0 0-1-1H4z" />
      </svg>
      <span class="share-button__label">Text</span>
    </a>
    <button class="share-button share-action share-button--copy share-action--copy" type="button" data-share-copy data-share-url="{{ share_url }}">
      <svg class="share-button__icon" aria-hidden="true" focusable="false" viewBox="0 0 24 24">
        <path d="M10.59 13.41a1 1 0 0 1 0 1.41l-2.83 2.83a2 2 0 1 1-2.83-2.83l2.12-2.12a1 1 0 0 0-1.41-1.41l-2.12 2.12a4 4 0 1 0 5.66 5.66l2.83-2.83a3 3 0 0 0 0-4.24 1 1 0 0 0-1.42.01zm2.82-2.82a1 1 0 0 1 0-1.41l2.83-2.83a2 2 0 1 1 2.83 2.83l-2.12 2.12a1 1 0 1 0 1.41 1.41l2.12-2.12a4 4 0 1 0-5.66-5.66l-2.83 2.83a3 3 0 0 0 0 4.24 1 1 0 0 0 1.42-.01z" />
      </svg>
      <span class="share-button__label">Copy link</span>
    </button>
  </div>
  <p class="share-panel__feedback" data-share-feedback hidden>Link copied to clipboard.</p>
</div>
