<nav class="site-nav" aria-label="Primary">
  <div class="site-nav__inner">
    <a class="site-nav__brand" href="{{ '/' | relative_url }}">{{ site.title }}</a>
    <button class="site-nav__toggle" type="button" aria-expanded="false" aria-controls="site-nav-links">
      <span class="site-nav__toggle-line"></span>
      <span class="site-nav__toggle-line"></span>
      <span class="site-nav__toggle-line"></span>
      <span class="visually-hidden">Menu</span>
    </button>
    <ul id="site-nav-links" class="site-nav__links">
      {% assign current = page.url | default: '/' | relative_url %}
      {% for item in site.data.nav %}
      {% assign item_url = item.url | relative_url %}
      {% assign normalized_current = current | replace: '//', '/' %}
      {% assign normalized_item = item_url | replace: '//', '/' %}
      <li>
        <a href="{{ item_url }}"{% if normalized_current == normalized_item %} aria-current="page"{% endif %}>{{ item.title }}</a>
      </li>
      {% endfor %}
    </ul>
  </div>
</nav>
<script>
  (function() {
    document.documentElement.classList.add('js-nav');
    const nav = document.querySelector('.site-nav');
    if (!nav) return;
    const toggle = nav.querySelector('.site-nav__toggle');
    const links = nav.querySelector('#site-nav-links');
    if (!toggle || !links) return;

    toggle.addEventListener('click', function() {
      const expanded = this.getAttribute('aria-expanded') === 'true';
      this.setAttribute('aria-expanded', !expanded);
      links.classList.toggle('is-open', !expanded);
    });

    links.addEventListener('click', function(event) {
      if (event.target.closest('a')) {
        toggle.setAttribute('aria-expanded', 'false');
        links.classList.remove('is-open');
      }
    });
  })();
</script>
