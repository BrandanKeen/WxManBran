<nav class="site-nav">
  <ul class="site-nav__links">
    {% assign current = page.url | default: '/' | relative_url %}
    {% for item in site.data.nav %}
      {% assign item_url = item.url | relative_url %}
      {% assign normalized_current = current | replace: '//', '/' %}
      {% assign normalized_item = item_url | replace: '//', '/' %}
      <li>
        <a href="{{ item_url }}"
           class="nav-link{% if normalized_current == normalized_item %} is-active{% endif %}"
           {% if normalized_current == normalized_item %}aria-current="page"{% endif %}>
          {% if item.icon %}
            <span class="nav-icon" aria-hidden="true">{% include icon.html name=item.icon %}</span>
          {% endif %}
          <span class="nav-label">{{ item.title }}</span>
        </a>
      </li>
    {% endfor %}
    <li class="site-nav__theme">
      <button type="button"
              class="nav-link theme-toggle__button"
              data-theme-toggle
              aria-pressed="false"
              aria-label="Switch to dark mode"
              title="Switch to dark mode">
        <span class="theme-toggle__track" aria-hidden="true">
          <span class="theme-toggle__icon theme-toggle__icon--sun">☀️</span>
          <span class="theme-toggle__thumb"></span>
          <span class="theme-toggle__icon theme-toggle__icon--moon">🌙</span>
        </span>
        <span class="visually-hidden" data-theme-toggle-text>Switch to dark mode</span>
      </button>
    </li>
  </ul>
</nav>
